<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extrator-I.A</title>
    
    <!-- Carrega o Tailwind CSS para estilização -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Carrega a biblioteca anime.js para animações -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    
    <!-- Carrega a fonte Inter do Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Estilos personalizados -->
    <style>
        /* Define a fonte Inter como padrão para um visual mais limpo */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Estiliza a barra de rolagem para combinar com o tema escuro */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937; /* Cor de fundo do rastro (cinza escuro) */
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563; /* Cor do polegar da barra (cinza médio) */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280; /* Cor do polegar ao passar o mouse */
        }
        /* Estilo para o item da lista que está selecionado */
        .session-item.selected {
            background-color: #3b82f6; /* Azul para indicar seleção */
            color: white;
        }
        /* Prepara os itens da lista para a animação de entrada */
        .session-item, .client-item {
            opacity: 0;
            transform: translateY(20px);
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 flex h-screen antialiased overflow-hidden">

    <!-- Container principal que organiza o layout -->
    <div class="flex w-full h-full">

        <!-- Barra Lateral de Sessões -->
        <aside id="sessions" class="w-1/3 max-w-xs bg-gray-800 flex flex-col border-r border-gray-700">
            <!-- Cabeçalho da barra lateral -->
            <div class="p-4 border-b border-gray-700">
                <h2 class="text-xl font-semibold text-white">Sessões</h2>
            </div>
            <!-- Lista de sessões com rolagem -->
            <div class="flex-grow p-2 overflow-y-auto">
                <ul id="sessionList" class="space-y-1">
                    <!-- Itens da sessão serão adicionados dinamicamente aqui pelo renderer.js -->
                </ul>
            </div>
            <!-- Rodapé da barra lateral com o botão de nova sessão -->
            <div class="p-4 border-t border-gray-700">
                <button id="newSession" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
                    </svg>
                    Nova Sessão
                </button>
            </div>
        </aside>

        <!-- Conteúdo Principal de Clientes -->
        <main id="clients" class="flex-1 flex flex-col bg-gray-900">
            <!-- Cabeçalho da área de clientes -->
            <div class="p-4 border-b border-gray-700">
                <h2 class="text-xl font-semibold text-white">Clientes</h2>
            </div>
            <!-- Área da lista de clientes -->
            <div class="flex-grow p-4 overflow-y-auto">
                <div id="client-view" class="h-full">
                     <div id="client-instructions-wrapper" class="bg-gray-800 p-4 rounded-lg mb-4">
                        <p id="client-instructions" class="text-center text-gray-400">Selecione uma sessão para ver os clientes.</p>
                     </div>
                     <ul id="clientList" class="space-y-2">
                        <!-- Itens de cliente serão adicionados dinamicamente aqui -->
                     </ul>
                </div>
            </div>
            <!-- Rodapé da área de clientes com formulário para adicionar novo cliente -->
            <div class="p-4 border-t border-gray-700 bg-gray-800">
                <div class="flex space-x-2">
                    <input id="newClientInput" type="text" placeholder="Número do cliente (ex: 5511999999999)" class="flex-grow bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" />
                    <button id="addClient" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200">
                        Adicionar
                    </button>
                </div>
            </div>
        </main>

    </div>

    <!-- Rodapé flutuante para ações globais -->
    <footer class="fixed bottom-0 right-0 p-4">
        <button id="exportChats" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
              <path d="M10.75 2.75a.75.75 0 00-1.5 0v8.614L6.295 8.235a.75.75 0 10-1.09 1.03l4.25 4.5a.75.75 0 001.09 0l4.25-4.5a.75.75 0 00-1.09-1.03l-2.905 3.079V2.75z" />
              <path d="M3.5 12.75a.75.75 0 00-1.5 0v2.5A2.75 2.75 0 004.75 18h10.5A2.75 2.75 0 0018 15.25v-2.5a.75.75 0 00-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5z" />
            </svg>
            Exportar Conversas
        </button>
    </footer>

    <!-- Carrega o seu script original, que continua funcional -->
    <script src="renderer.js"></script>

    <!-- Script adicional para melhorar a interatividade e adicionar animações -->
    <script>
        const sessionList = document.getElementById('sessionList');
        const clientInstructionsWrapper = document.getElementById('client-instructions-wrapper');
        const clientList = document.getElementById('clientList');

        // Animação para os botões
        document.querySelectorAll('button').forEach(button => {
            button.addEventListener('mousedown', () => {
                anime({
                    targets: button,
                    scale: 0.95,
                    duration: 100
                });
            });
            button.addEventListener('mouseup', () => {
                anime({
                    targets: button,
                    scale: 1,
                    duration: 100
                });
            });
        });
        
        // Função para animar a entrada de um novo item na lista
        const animateListItemIn = (node) => {
            anime({
                targets: node,
                opacity: [0, 1],
                translateY: [20, 0],
                duration: 400,
                easing: 'easeOutExpo'
            });
        };

        // Função para estilizar os itens da lista de clientes
        const styleClientListItems = () => {
            clientList.querySelectorAll('li:not(.styled)').forEach(node => {
                node.classList.add('bg-gray-800', 'px-4', 'py-3', 'rounded-lg', 'styled', 'client-item');
                animateListItemIn(node);
            });
        };

        // Observador para estilizar e animar novos itens adicionados dinamicamente
        const observer = new MutationObserver((mutationsList) => {
            for(const mutation of mutationsList) {
                if (mutation.type === 'childList') {
                    // Estiliza e anima novos itens de sessão
                    mutation.addedNodes.forEach(node => {
                        if (node.tagName === 'LI') {
                            node.classList.add('px-3', 'py-2', 'rounded-md', 'cursor-pointer', 'hover:bg-gray-700', 'transition-colors', 'duration-150', 'session-item');
                            
                            // Anima a entrada do novo item
                            animateListItemIn(node);

                            node.addEventListener('click', () => {
                                // Remove a classe 'selected' de todos os outros itens
                                sessionList.querySelectorAll('li').forEach(item => {
                                    item.classList.remove('selected', 'bg-blue-600');
                                });
                                // Adiciona a classe 'selected' ao item clicado
                                node.classList.add('selected', 'bg-blue-600');

                                // Esconde a mensagem de instruções quando uma sessão é selecionada
                                if (clientInstructionsWrapper) {
                                    anime({
                                        targets: clientInstructionsWrapper,
                                        opacity: 0,
                                        duration: 300,
                                        easing: 'easeOutExpo',
                                        complete: () => {
                                            clientInstructionsWrapper.style.display = 'none';
                                        }
                                    });
                                }
                            });
                        }
                    });
                    // Estiliza novos itens de cliente
                    styleClientListItems();
                }
            }
        });

        const clientObserver = new MutationObserver(styleClientListItems);

        // Inicia a observação das listas para aplicar estilos e animações automaticamente
        observer.observe(sessionList, { childList: true });
        clientObserver.observe(clientList, { childList: true });
    </script>
</body>
</html>
